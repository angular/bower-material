/*!
 * AngularJS Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.1.12-master-251cfed
 */
!function(t,d,e){"use strict";function i(t){return'<div class="md-virtual-repeat-scroller" role="presentation"><div class="md-virtual-repeat-sizer" role="presentation"></div><div class="md-virtual-repeat-offsetter" role="presentation">'+t[0].innerHTML+"</div></div>"}s.$inject=["$$rAF","$mdUtil","$mdConstant","$parse","$rootScope","$window","$scope","$element","$attrs"],o.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"],n.$inject=["$parse"],d.module("material.components.virtualRepeat",["material.core","material.components.showHide"]).directive("mdVirtualRepeatContainer",function(){return{controller:s,template:i,compile:function(t,e){t.addClass("md-virtual-repeat-container").addClass(e.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}).directive("mdVirtualRepeat",n).directive("mdForceHeight",h);function s(t,i,e,s,n,o,r,h,l){this.$rootScope=n,this.$scope=r,this.$element=h,this.$attrs=l,this.size=0,this.scrollSize=0,this.scrollOffset=0,this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal"),this.repeater=null,this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink"),this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0,this.originalSize=null,this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0,this.oldElementSize=null,this.maxElementPixels=e.ELEMENT_MAX_PIXELS,this.$attrs.mdTopIndex?(this.bindTopIndex=s(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),d.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,d.bind(this,function(t){t!==this.topIndex&&this.scrollToIndex(t)}))):this.topIndex=0,this.scroller=h[0].querySelector(".md-virtual-repeat-scroller"),this.sizer=this.scroller.querySelector(".md-virtual-repeat-sizer"),this.offsetter=this.scroller.querySelector(".md-virtual-repeat-offsetter");var a=d.bind(this,this.updateSize);t(d.bind(this,function(){a();var t=i.debounce(a,10,null,!1),e=d.element(o);this.size||t(),e.on("resize",t),r.$on("$destroy",function(){e.off("resize",t)}),r.$emit("$md-resize-enable"),r.$on("$md-resize",a)}))}function n(s){return{controller:o,priority:1e3,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(t,e){var i=e.mdVirtualRepeat.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),o=i[1],r=s(i[2]),h=e.mdExtraName&&s(e.mdExtraName);return function(t,e,i,s,n){s[0].link_(s[1],n,o,r,h)}}}}function o(t,e,i,s,n,o,r,h){this.$scope=t,this.$element=e,this.$attrs=i,this.$browser=s,this.$document=n,this.$mdUtil=h,this.$rootScope=o,this.$$rAF=r,this.onDemand=h.parseAttributeBoolean(i.mdOnDemand),this.browserCheckUrlChange=s.$$checkUrlChange,this.newStartIndex=0,this.newEndIndex=0,this.newVisibleEnd=0,this.startIndex=0,this.endIndex=0,this.itemSize=t.$eval(i.mdItemSize)||null,this.isFirstRender=!0,this.isVirtualRepeatUpdating_=!1,this.itemsLength=0,this.unwatchItemSize_=d.noop,this.blocks={},this.pooledBlocks=[],t.$on("$destroy",d.bind(this,this.cleanupBlocks_))}function r(t){if(!d.isFunction(t.getItemAtIndex)||!d.isFunction(t.getLength))throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength().");this.model=t}function h(t){return{restrict:"A",link:function(t,e,i){var s=t.$eval(i.mdForceHeight)||null;s&&e&&(e[0].style.height=s)}}}s.prototype.register=function(t){this.repeater=t,d.element(this.scroller).on("scroll wheel touchmove touchend",d.bind(this,this.handleScroll_))},s.prototype.isHorizontal=function(){return this.horizontal},s.prototype.getSize=function(){return this.size},s.prototype.setSize_=function(t){var e=this.getDimensionName_();this.size=t,this.$element[0].style[e]=t+"px"},s.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize,this.oldElementSize=null},s.prototype.updateSize=function(){if(!this.originalSize){var t=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight;t&&(this.size=t),this.handleScroll_(),this.repeater&&this.repeater.containerUpdated()}},s.prototype.getScrollSize=function(){return this.scrollSize},s.prototype.getDimensionName_=function(){return this.isHorizontal()?"width":"height"},s.prototype.sizeScroller_=function(t){var e=this.getDimensionName_(),i=this.isHorizontal()?"height":"width";if(this.sizer.innerHTML="",t<this.maxElementPixels)this.sizer.style[e]=t+"px";else{this.sizer.style[e]="auto",this.sizer.style[i]="auto";var s=Math.floor(t/this.maxElementPixels),n=document.createElement("div");n.style[e]=this.maxElementPixels+"px",n.style[i]="1px";for(var o=0;o<s;o++)this.sizer.appendChild(n.cloneNode(!1));n.style[e]=t-s*this.maxElementPixels+"px",this.sizer.appendChild(n)}},s.prototype.autoShrink_=function(t){var e=Math.max(t,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&e!==this.size){null===this.oldElementSize&&(this.oldElementSize=this.$element[0].style[this.getDimensionName_()]);var i=this.originalSize||this.size;if(!i||e<i)this.originalSize||(this.originalSize=this.size),this.setSize_(e);else if(null!==this.originalSize){this.unsetSize_();var s=this.originalSize;this.originalSize=null,s||this.updateSize(),this.setSize_(s||this.size)}this.repeater.containerUpdated()}},s.prototype.setScrollSize=function(t){var e=t+this.offsetSize;this.scrollSize!==e&&(this.sizeScroller_(e),this.autoShrink_(e),this.scrollSize=e)},s.prototype.getScrollOffset=function(){return this.scrollOffset},s.prototype.scrollTo=function(t){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=t,this.handleScroll_()},s.prototype.scrollToIndex=function(t){var e=this.repeater.getItemSize(),i=this.repeater.itemsLength;i<t&&(t=i-1),this.scrollTo(e*t)},s.prototype.resetScroll=function(){this.scrollTo(0)},s.prototype.handleScroll_=function(){var t="rtl"!==document.dir&&"rtl"!==document.body.dir;t||this.maxSize||(this.scroller.scrollLeft=this.scrollSize,this.maxSize=this.scroller.scrollLeft);var e=this.isHorizontal()?t?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft:this.scroller.scrollTop;if(!(e===this.scrollOffset||e>this.scrollSize-this.size)){var i=this.repeater.getItemSize();if(i){var s=Math.max(0,Math.floor(e/i)-3),n=(this.isHorizontal()?"translateX(":"translateY(")+(!this.isHorizontal()||t?s*i:-s*i)+"px)";if(this.scrollOffset=e,this.offsetter.style.webkitTransform=n,this.offsetter.style.transform=n,this.bindTopIndex){var o=Math.floor(e/i);o!==this.topIndex&&o<this.repeater.getItemCount()&&(this.topIndex=o,this.bindTopIndex.assign(this.$scope,o),this.$rootScope.$$phase||this.$scope.$digest())}this.repeater.containerUpdated()}}},o.prototype.link_=function(t,e,i,s,n){this.container=t,this.transclude=e,this.repeatName=i,this.rawRepeatListExpression=s,this.extraName=n,this.sized=!1,this.repeatListExpression=d.bind(this,this.repeatListExpression_),this.container.register(this)},o.prototype.cleanupBlocks_=function(){d.forEach(this.pooledBlocks,function(t){t.element.remove()})},o.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope),this.parentNode=this.$element[0].parentNode;var t=this.getBlock_(0);t.element[0].parentNode||this.parentNode.appendChild(t.element[0]),this.itemSize=t.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null,this.blocks[0]=t,this.poolBlock_(0),this.itemSize&&this.containerUpdated()}},o.prototype.repeatListExpression_=function(t){var e=this.rawRepeatListExpression(t);if(this.onDemand&&e){var i=new r(e);return i.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),i}return e},o.prototype.containerUpdated=function(){if(!this.itemSize)return this.unwatchItemSize_&&this.unwatchItemSize_!==d.noop&&this.unwatchItemSize_(),this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,d.bind(this,function(t){t&&t.length&&this.readItemSize_()})),void(this.$rootScope.$$phase||this.$scope.$digest());this.sized||(this.items=this.repeatListExpression(this.$scope)),this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,d.bind(this,function(t,e){this.isVirtualRepeatUpdating_||this.virtualRepeatUpdate_(t,e)}))),this.updateIndexes_(),(this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof r&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items))},o.prototype.getItemSize=function(){return this.itemSize},o.prototype.getItemCount=function(){return this.itemsLength},o.prototype.virtualRepeatUpdate_=function(t,e){this.isVirtualRepeatUpdating_=!0;var i=t&&t.length||0,s=!1;if(this.items&&i<this.items.length&&0!==this.container.getScrollOffset()){this.items=t;var n=this.container.getScrollOffset();this.container.resetScroll(),this.container.scrollTo(n)}i!==this.itemsLength&&(s=!0,this.itemsLength=i),((this.items=t)!==e||s)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,s&&this.container.setScrollSize(i*this.itemSize),Object.keys(this.blocks).forEach(function(t){var e=parseInt(t,10);(e<this.newStartIndex||e>=this.newEndIndex)&&this.poolBlock_(e)},this),this.$browser.$$checkUrlChange=d.noop;var o,r,h=[],l=[];for(o=this.newStartIndex;o<this.newEndIndex&&null==this.blocks[o];o++)r=this.getBlock_(o),this.updateBlock_(r,o),h.push(r);for(;null!=this.blocks[o];o++)this.updateBlock_(this.blocks[o],o);for(var a=o-1;o<this.newEndIndex;o++)r=this.getBlock_(o),this.updateBlock_(r,o),l.push(r);if(h.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(h),this.$element[0].nextSibling),l.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(l),this.blocks[a]&&this.blocks[a].element[0].nextSibling),this.$browser.$$checkUrlChange=this.browserCheckUrlChange,this.startIndex=this.newStartIndex,this.endIndex=this.newEndIndex,this.isFirstRender){this.isFirstRender=!1;var c=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex;this.$mdUtil.nextTick(function(){this.container.scrollToIndex(c)}.bind(this))}this.isVirtualRepeatUpdating_=!1},o.prototype.getBlock_=function(i){return this.pooledBlocks.length?this.pooledBlocks.pop():(this.transclude(d.bind(this,function(t,e){s={element:t,new:!0,scope:e},this.updateScope_(e,i),this.parentNode.appendChild(t[0])})),s);var s},o.prototype.updateBlock_=function(t,e){((this.blocks[e]=t).new||t.scope.$index!==e||t.scope[this.repeatName]!==this.items[e])&&(t.new=!1,this.updateScope_(t.scope,e),this.$rootScope.$$phase||t.scope.$digest())},o.prototype.updateScope_=function(t,e){t.$index=e,t[this.repeatName]=this.items&&this.items[e],this.extraName&&(t[this.extraName(this.$scope)]=this.items[e])},o.prototype.poolBlock_=function(t){this.pooledBlocks.push(this.blocks[t]),this.parentNode.removeChild(this.blocks[t].element[0]),delete this.blocks[t]},o.prototype.domFragmentFromBlocks_=function(t){var e=this.$document[0].createDocumentFragment();return t.forEach(function(t){e.appendChild(t.element[0])}),e},o.prototype.updateIndexes_=function(){var t=this.items?this.items.length:0,e=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(t-e,Math.floor(this.container.getScrollOffset()/this.itemSize))),this.newVisibleEnd=this.newStartIndex+e+3,this.newEndIndex=Math.min(t,this.newVisibleEnd),this.newStartIndex=Math.max(0,this.newStartIndex-3)},r.prototype.$$includeIndexes=function(t,e){for(var i=t;i<e;i++)this.hasOwnProperty(i)||(this[i]=this.model.getItemAtIndex(i));this.length=this.model.getLength()},h.$inject=["$mdUtil"]}(window,window.angular);